<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Gradient Descent</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
   
</head>
<body>
    <canvas width="800" height="600" id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');
        const points = [];
        const mean = {};
        const linearFunction = {m:0, b:0};
        const f = (x) => linearFunction.m * x + linearFunction.b;

        drawScreen();

        canvas.addEventListener('click', (event) =>{

            const mousePositionX = event.clientX - canvas.offsetLeft;
            const mousePositionY = event.clientY - canvas.offsetTop;

            points.push({x:mousePositionX, y:mousePositionY});
             
            calculateMean();
            calculateGradientDescent();
            drawScreen();            
            drawPoints();
            drawMean();
            drawGradientDescent();

        });

        function calculateMean() {
            
            mean.x = points.reduce((accumulator, item) => item.x + accumulator, 0) / points.length;
            mean.y = points.reduce((accumulator, item) => item.y + accumulator, 0) / points.length;  

        }

        function calculateGradientDescent(){

            linearFunction.m = .8;
            linearFunction.b = 10;

            

        }

        function drawScreen(){

            context.beginPath();
            context.fillStyle = 'black';
            context.fillRect(0, 0, 800, 600);            
            context.fill();

        }

        function drawMean(){

            context.beginPath();
            context.strokeStyle = 'red'; 
            context.moveTo(mean.x, 0);
            context.lineTo(mean.x, 600);
            context.moveTo(0, mean.y);
            context.lineTo(800, mean.y);
            context.stroke();

            context.beginPath(); 
            context.fillStyle = 'red';         
            context.arc(mean.x, mean.y, 5, 0, 2 * Math.PI);             
            context.fill();

        }

        function drawPoints(){
           
            points.forEach(point => {
                
                context.beginPath();
                context.fillStyle = 'white';
                context.arc(point.x, point.y, 2, 0, 2 * Math.PI);                
                context.fill(); 
            
            });                      

        }

        function drawGradientDescent(){

            context.beginPath();
            context.strokeStyle = 'green';
            context.moveTo(0, f(0));
            context.lineTo(800, f(800));
            context.stroke();
        }

    </script>
</body>
</html>